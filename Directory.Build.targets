<Project>

  <Target Name="Coverage">
    <Exec Command='dotnet test \
      -p:CollectCoverage=true \
      -p:CoverletOutputFormat=lcov \
      -p:CoverletOutput="./lcov.info" \
      -p:Include="[$(MSBuildProjectName)]%2A" \
      -p:Exclude="[%2A]%2A.AutoGeneratedProgram" \
      -p:IncludeTestAssembly=true \
      -p:Threshold="90" \
      --no-restore --nologo'
    />
  </Target>

  <Target Name="Test">
    <Exec Command='export IN_MEMORY=false; dotnet test \
      -p:BuildProjectReferences=false \
      --no-restore --nologo'
    />
  </Target>

  <Target Name="TestIM">
    <Exec Command='export IN_MEMORY=true; dotnet test \
      -p:BuildProjectReferences=false \
      --no-restore --nologo'
    />
  </Target>

</Project>